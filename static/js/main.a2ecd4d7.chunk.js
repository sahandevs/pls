(this.webpackJsonppls=this.webpackJsonppls||[]).push([[0],{78:function(e,n,a){e.exports=a(86)},86:function(e,n,a){"use strict";a.r(n);var t=a(0),r=a.n(t),c=a(8),u=a.n(c),i=a(11),l=a(128),o=a(130),m=a(122),s=a(120),f=a(135),d=a(121),v=a(67),h=a(123),E=a(48),g=a(56),x=a(57),p=a(62),b=a(63),k=a(133),y=a(116),O=a(117),C=a(134),w=r.a.createContext(null);function j(){var e=r.a.useContext(w);if(null==e)throw new Error("useDBContext used outside of the context");return e}var S=function(){function e(){var n=this;Object(p.a)(this,e),this.currencies=new k.a([]),this.exchangeRates=new k.a([]),this.bank=new k.a({}),this.currencies.pipe(Object(y.a)(1)).subscribe({next:function(){return n.save()}}),this.exchangeRates.pipe(Object(y.a)(1)).subscribe({next:function(){return n.save()}}),this.bank.pipe(Object(y.a)(1)).subscribe({next:function(){return n.save()}})}return Object(b.a)(e,[{key:"addOrUpdateCurrency",value:function(e){var n=Object(x.a)(this.currencies.value),a=n.find((function(n){return n.name===e.name}));null!=a?Object.assign(a,e):n.push(e),this.currencies.next(n)}},{key:"bankOf",value:function(e){return this.bank.pipe(Object(O.a)((function(n){var a;return null!==(a=n[e.name])&&void 0!==a?a:0})))}},{key:"canSpend",value:function(e,n){return this.bankOf(e).pipe(Object(O.a)((function(e){return e-n>=0})))}},{key:"addToBank",value:function(e,n){var a;this.bank.next(Object(g.a)({},this.bank.value,Object(E.a)({},e.name,Math.max(0,(null!==(a=this.bank.value[e.name])&&void 0!==a?a:0)+n))))}},{key:"exchange",value:function(e,n){var a=this;this.canExchange(e,n).pipe(Object(C.a)(1)).subscribe({next:function(t){if(t){var r=Object(g.a)({},a.bank.value);null==r[e.from.name]&&(r[e.from.name]=0),r[e.from.name]-=n,null==r[e.to.name]&&(r[e.to.name]=0),r[e.to.name]+=n*e.rate,a.bank.next(r)}}})}},{key:"canExchange",value:function(e,n){return this.bankOf(e.from).pipe(Object(O.a)((function(e){return e>=n})))}},{key:"removeCurrency",value:function(e){this.currencies.next(this.currencies.value.filter((function(n){return n.name!==e.name})))}},{key:"addOrUpdateExchangeRate",value:function(e){var n=Object(x.a)(this.exchangeRates.value),a=n.find((function(n){return n.from.name===e.from.name&&n.to.name===e.to.name}));null!=a?Object.assign(a,e):n.push(e),this.exchangeRates.next(n)}},{key:"removeExchangeRate",value:function(e){this.exchangeRates.next(this.exchangeRates.value.filter((function(n){return n.from.name===e.from.name&&n.to.name===e.to.name})))}},{key:"getCurrencies",value:function(){return this.currencies}},{key:"getExchangeRates",value:function(){return this.exchangeRates}},{key:"load",value:function(){var e,n,a,t,r=JSON.parse(null!==(e=localStorage.getItem("DATA"))&&void 0!==e?e:"{}");this.currencies.next(null!==(n=r.currencies)&&void 0!==n?n:[]),this.exchangeRates.next(null!==(a=r.exchangeRates)&&void 0!==a?a:[]),this.bank.next(null!==(t=r.bank)&&void 0!==t?t:{})}},{key:"save",value:function(){var e={currencies:this.currencies.value,exchangeRates:this.exchangeRates.value,bank:this.bank.value};localStorage.setItem("DATA",JSON.stringify(e))}}]),e}();function R(e,n){var a=r.a.useState(n),t=Object(i.a)(a,2),c=t[0],u=t[1];return r.a.useEffect((function(){var n=("function"===typeof e?e():e).subscribe({next:function(e){u(e)}});return function(){return n.unsubscribe()}}),[e]),c}function D(e){var n=e.exchangeRate,a=e.value,t=e.onDone,c=j(),u=R(c.canExchange(n,a),!1);return r.a.createElement(f.a,{disabled:!u,onClick:function(){c.exchange(n,a),t()}},"1 ".concat(n.from.unit," of ").concat(n.from.name," to ").concat(a*n.rate," ").concat(n.to.unit," of ").concat(n.to.name))}function N(e){var n=e.currency,a=j(),t=R(a.getExchangeRates(),[]),c=R(a.bankOf(n),0),u=r.a.useState(null),l=Object(i.a)(u,2),f=l[0],h=l[1],E=function(){h(null)};return r.a.createElement(s.a,{variant:"outlined"},r.a.createElement(o.a,{padding:2,display:"flex",flexDirection:"column"},r.a.createElement(d.a,null,"".concat(c," ").concat(n.unit," of ").concat(n.name)),r.a.createElement(m.a,{onClick:function(e){return h(e.currentTarget)},"aria-controls":"menu","aria-haspopup":"true"},"Exchange"),r.a.createElement(v.a,{id:"menu",anchorEl:f,keepMounted:!0,open:null!=f,onClose:E},t.filter((function(e){return e.from.name===n.name})).map((function(e){return r.a.createElement(D,{key:e.from.name+"_"+e.to.name,exchangeRate:e,value:1,onDone:E})}))),r.a.createElement(o.a,{display:"flex",flexDirection:"row"},r.a.createElement(m.a,{onClick:function(e){return a.addToBank(n,1)}},"+1"),r.a.createElement(m.a,{onClick:function(e){return a.addToBank(n,-1)}},"-1"))))}function T(e){var n=e.currency,a=j(),t=R(a.bankOf(n),0),c=R(a.canSpend(n,1),!1),u=R(a.getExchangeRates(),[]).filter((function(e){return e.from.name===n.name})),l=r.a.useState(null),f=Object(i.a)(l,2),h=f[0],E=f[1],g=function(){E(null)};return r.a.createElement(s.a,{variant:"outlined"},r.a.createElement(o.a,{padding:2,display:"flex",flexDirection:"column"},r.a.createElement(d.a,null,"".concat(t," ").concat(n.unit," of ").concat(n.name)),u.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{onClick:function(e){return E(e.currentTarget)},"aria-controls":"menu","aria-haspopup":"true"},"Exchange"),r.a.createElement(v.a,{id:"menu",anchorEl:h,keepMounted:!0,open:null!=h,onClose:g},u.filter((function(e){return e.from.name===n.name})).map((function(e){return r.a.createElement(D,{key:e.from.name+"_"+e.to.name,exchangeRate:e,value:1,onDone:g})})))),r.a.createElement(m.a,{disabled:!c,onClick:function(){return a.addToBank(n,-1)}},"Spend 1 ".concat(n.unit))))}function I(){var e=R(j().getCurrencies(),[]);return r.a.createElement(o.a,{display:"flex",flexDirection:"column",alignItems:"center"},r.a.createElement(d.a,{variant:"h5"},"Exchange"),r.a.createElement(o.a,{display:"flex",flexWrap:"wrap",flexDirection:"row"},e.filter((function(e){return e.isSource})).map((function(e){return r.a.createElement(N,{key:e.name,currency:e})}))),r.a.createElement(h.a,{variant:"middle"}),r.a.createElement(d.a,{variant:"h5"},"Spend"),r.a.createElement(o.a,{display:"flex",flexWrap:"wrap",flexDirection:"row"},e.filter((function(e){return!e.isSource})).map((function(e){return r.a.createElement(T,{key:e.name,currency:e})}))))}var _=a(124),B=a(136),M=a(131);function U(e){var n=e.currency,a=e.isNew,t=j(),c=r.a.useState((function(){return n.name})),u=Object(i.a)(c,2),l=u[0],s=u[1],f=r.a.useState((function(){return n.icon})),v=Object(i.a)(f,2),h=v[0],E=v[1],g=r.a.useState((function(){return n.description})),x=Object(i.a)(g,2),p=x[0],b=x[1],k=r.a.useState((function(){return n.isSource})),y=Object(i.a)(k,2),O=y[0],C=y[1],w=r.a.useState((function(){return n.isTime})),S=Object(i.a)(w,2),R=S[0],D=S[1],N=r.a.useState((function(){return n.unit})),T=Object(i.a)(N,2),I=T[0],U=T[1],W=l!==n.name||h!==n.icon||p!==n.description||R!==n.isTime||I!==n.unit||O!==n.isSource;return r.a.createElement(o.a,{display:"flex",flexDirection:"row",alignItems:"center",margin:1,justifyContent:"space-between"},!a&&r.a.createElement(_.a,null,n.icon),a&&r.a.createElement(B.a,{label:"Icon",value:h,onChange:function(e){return E(e.target.value)}}),r.a.createElement(B.a,{label:"Name",value:l,onChange:function(e){return s(e.target.value)}}),r.a.createElement(B.a,{label:"Description",value:p,onChange:function(e){return b(e.target.value)}}),r.a.createElement(B.a,{label:"Unit",value:I,onChange:function(e){return U(e.target.value)}}),r.a.createElement(M.a,{checked:R,onChange:function(e,n){return D(n)}}),r.a.createElement(d.a,null,"Is time"),r.a.createElement(M.a,{checked:O,onChange:function(e,n){return C(n)}}),r.a.createElement(d.a,null,"Is source"),W&&r.a.createElement(m.a,{onClick:function(){t.addOrUpdateCurrency({name:l,icon:h,description:p,isTime:R,unit:I,isSource:O})}},r.a.createElement(_.a,null,"save")),!a&&r.a.createElement(m.a,{onClick:function(){t.removeCurrency(n)}},r.a.createElement(_.a,null,"delete")))}function W(){var e=R(j().getCurrencies(),[]);return r.a.createElement(o.a,{display:"flex",flexDirection:"column"},e.map((function(e,n){return r.a.createElement(U,{key:e.name,currency:e,isNew:!1})})),r.a.createElement(U,{key:"new_currency_item_".concat(e.length),currency:{name:"New currency ".concat(e.length+1),description:"",icon:"",isSource:!1,isTime:!1,unit:"hour"},isNew:!0}))}var A=a(127),J=a(138),F=a(132);function X(e){var n=e.rate,a=e.isNew,t=j(),c=R(t.getCurrencies(),[]),u=r.a.useState((function(){return null===n||void 0===n?void 0:n.from})),l=Object(i.a)(u,2),s=l[0],v=l[1],h=r.a.useState((function(){return null===n||void 0===n?void 0:n.to})),E=Object(i.a)(h,2),g=E[0],x=E[1],p=r.a.useState((function(){var e;return null!==(e=null===n||void 0===n?void 0:n.rate.toString())&&void 0!==e?e:""})),b=Object(i.a)(p,2),k=b[0],y=b[1],O=(null===s||void 0===s?void 0:s.name)!==(null===n||void 0===n?void 0:n.from.name)||(null===g||void 0===g?void 0:g.name)!==(null===n||void 0===n?void 0:n.to.name)||Number(k)!==(null===n||void 0===n?void 0:n.rate),C=!isNaN(Number(k))&&null!=s&&null!=g&&Number(k)>0;return r.a.createElement(o.a,{display:"flex",flexDirection:"row",alignItems:"center",margin:1,justifyContent:"space-between"},r.a.createElement(o.a,{display:"flex",flexDirection:"row"},r.a.createElement(A.a,null,r.a.createElement(J.a,{id:"from-label-id"},"From"),r.a.createElement(F.a,{labelId:"from-label-id",value:null===s||void 0===s?void 0:s.name,onChange:function(e,n){return v(c.find((function(n){return n.name===e.target.value})))}},r.a.createElement(f.a,null,"-"),c.filter((function(e){return e.name!==(null===g||void 0===g?void 0:g.name)})).map((function(e,n){return r.a.createElement(f.a,{key:e.name+"_from",value:e.name},e.name)})))),r.a.createElement(o.a,{marginX:1}),r.a.createElement(B.a,{value:k,inputMode:"decimal",onChange:function(e){return y(e.target.value)},label:"Rate"}),r.a.createElement(o.a,{marginX:1}),r.a.createElement(A.a,null,r.a.createElement(J.a,{id:"to-label-id"},"To"),r.a.createElement(F.a,{labelId:"to-label-id",value:null===g||void 0===g?void 0:g.name,onChange:function(e,n){return x(c.find((function(n){return n.name===e.target.value})))}},r.a.createElement(f.a,null,"-"),c.filter((function(e){return e.name!==(null===s||void 0===s?void 0:s.name)})).map((function(e,n){return r.a.createElement(f.a,{key:e.name+"_to",value:e.name},e.name)}))))),C&&r.a.createElement(d.a,null,"1 ".concat(null===s||void 0===s?void 0:s.unit," of ").concat(null===s||void 0===s?void 0:s.name," = ").concat(Number(k)," ").concat(null===g||void 0===g?void 0:g.unit," of ").concat(null===g||void 0===g?void 0:g.name)),r.a.createElement(o.a,{display:"flex",flexDirection:"row"},O&&C&&r.a.createElement(m.a,{onClick:function(){null!=s&&null!=g&&t.addOrUpdateExchangeRate({from:s,to:g,rate:Number(k)})}},r.a.createElement(_.a,null,"save")),!a&&null!=n&&r.a.createElement(m.a,{onClick:function(){t.removeExchangeRate(n)}},r.a.createElement(_.a,null,"delete"))))}function P(){var e=R(j().getExchangeRates(),[]);return r.a.createElement(o.a,{display:"flex",flexDirection:"column"},e.map((function(e,n){return r.a.createElement(X,{key:e.from.name+"_"+e.to.name+"_"+e.rate,rate:e,isNew:!1})})),r.a.createElement(X,{key:e.length,isNew:!0}))}var $=function(){var e=r.a.useState("exchange"),n=Object(i.a)(e,2),a=n[0],t=n[1],c=r.a.useMemo((function(){return function(){var e=new S;return e.load(),e}()}),[]);return r.a.createElement(w.Provider,{value:c},r.a.createElement(l.a,null),r.a.createElement(o.a,{display:"flex",flexDirection:"column",paddingTop:3,alignItems:"center"},r.a.createElement(o.a,{display:"flex",flexDirection:"row"},r.a.createElement(m.a,{variant:"setup-currencies"===a?"outlined":"text",onClick:function(){return t("setup-currencies")}},"Setup Currencies"),r.a.createElement(m.a,{variant:"exchange"===a?"outlined":"text",onClick:function(){return t("exchange")}},"Exchange"),r.a.createElement(m.a,{variant:"setup-exhange-rates"===a?"outlined":"text",onClick:function(){return t("setup-exhange-rates")}},"Setup Exchange Rates")),r.a.createElement(o.a,{marginTop:5,flex:1,minWidth:"75%"},r.a.createElement(s.a,null,"exchange"===a&&r.a.createElement(I,null),"setup-currencies"===a&&r.a.createElement(W,null),"setup-exhange-rates"===a&&r.a.createElement(P,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[78,1,2]]]);
//# sourceMappingURL=main.a2ecd4d7.chunk.js.map